/*! 最终版权归 youngFuns 所有 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18cff9a2"],{a055:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{offset:2,span:15}},[n("el-card",[n("div",{staticClass:"info"},[n("h4",[t._v(t._s(t.mvInfo.name))]),t._l(t.mvInfo.artists,(function(e,r){return n("a",{key:e.id,attrs:{href:"#"},on:{click:function(n){return t.saveSingerId(e.id)}}},[t._v(t._s(e.name)),n("i",[t._v(t._s(r===t.mvInfo.artists.length-1?"":"/"))])])}))],2),n("div",{staticClass:"mv-show"},[n("video",{attrs:{src:t.mvUrl,controls:""}})]),n("div",{staticClass:"emj"},[n("i",{staticClass:"iconfont icon-qingdankushoucang"},[t._v(t._s(t.mvInfo.subCount))]),n("i",{staticClass:"iconfont icon-iconfenxiang"},[t._v(t._s(t.mvInfo.shareCount))])])]),n("album-coment",{attrs:{albumComentsObj:t.comments}}),n("el-pagination",{attrs:{"current-page":this.pageNum,"page-sizes":[20,100,200,400],"page-size":this.queryInfo.limit,layout:"total, sizes, prev, pager, next, jumper",total:this.comments.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),n("el-col",{attrs:{span:5}},[n("el-card",[n("div",{staticClass:"desc"},[n("h4",[t._v("MV 简介")]),n("div",[t._v("发布时间："+t._s(t.mvInfo.publishTime))]),n("div",[t._v("播放次数："+t._s(t._f("counFormate")(t.mvInfo.playCount)))]),n("p",[t._v(t._s(t.mvInfo.desc))])]),n("div",{staticClass:"more"},[n("div",{staticClass:"desc"},[n("h4",[t._v("相关推荐")]),n("ul",t._l(t.mvs,(function(e){return n("li",{key:e.id},[n("a",{attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.getCurrentMvDet(e.id)}}},[n("img",{attrs:{src:e.cover,alt:""}}),n("i",{staticClass:"iconfont icon-shexiang"},[t._v(t._s(t._f("counFormate")(e.playCount)))])]),n("div",[n("p",{on:{click:function(n){return n.preventDefault(),t.getCurrentMvDet(e.id)}}},[t._v(t._s(e.name))]),n("p",[t._v(t._s(t._f("secondFormate")(e.duration)))]),n("p",[t._v("by "+t._s(e.artistName))])])])})),0)])])])],1)],1)],1)},a=[],s=n("1da1"),i=n("5530"),o=(n("96cf"),n("1bab"));function u(t){return Object(o["a"])({url:"/mv/url",params:{id:t}})}function c(t){return Object(o["a"])({url:"/mv/detail",params:{mvid:t}})}function m(t){return Object(o["a"])({url:"/comment/mv",params:t})}function v(t){return Object(o["a"])({url:"/simi/mv",params:{mvid:t}})}var f=n("7fe5"),l=n("5880"),d={data:function(){return{mvUrl:"",mvInfo:{artists:[]},queryInfo:{id:this.$store.state.mvId,limit:20,offset:0,before:null},pageNum:1,comments:{},mvs:[]}},created:function(){this.getMvUrlRef(),this.getMvDetRef(),this.getMvCommentRef(),this.getSimiMvRef()},methods:Object(i["a"])(Object(i["a"])({getMvUrlRef:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u(t.$store.state.mvId);case 2:if(n=e.sent,r=n.data,200===r.code){e.next=6;break}return e.abrupt("return",t.$message.error("获取mv详情失败"));case 6:t.mvUrl=r.data.url;case 7:case"end":return e.stop()}}),e)})))()},getMvDetRef:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c(t.$store.state.mvId);case 2:n=e.sent,r=n.data,t.mvInfo=r.data;case 5:case"end":return e.stop()}}),e)})))()},getMvCommentRef:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m(t.queryInfo);case 2:if(n=e.sent,r=n.data,200===r.code){e.next=6;break}return e.abrupt("return",t.$message.error("获取评论失败"));case 6:r.total>=5e3&&(t.queryInfo.before=r.comments[r.comments.length-1].time),t.comments=r;case 8:case"end":return e.stop()}}),e)})))()},handleSizeChange:function(t){this.queryInfo.limit=t,this.getMvCommentRef()},handleCurrentChange:function(t){this.pageNum=t,this.queryInfo.offset=(t-1)*this.queryInfo.limit,this.getMvCommentRef()},getSimiMvRef:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v(t.$store.state.mvId);case 2:if(n=e.sent,r=n.data,200===r.code){e.next=6;break}return e.abrupt("return",t.$message.error("获取相关 mv 推荐失败"));case 6:t.mvs=r.mvs;case 7:case"end":return e.stop()}}),e)})))()}},Object(l["mapMutations"])(["mvIdMutations","singerIdMutations"])),{},{getCurrentMvDet:function(t){this.mvIdMutations(t),this.$router.go(0)},saveSingerId:function(t){this.singerIdMutations(t),this.$router.push("/singer/detail")}}),components:{AlbumComent:f["a"]}},h=d,g=(n("ed33"),n("2877")),p=Object(g["a"])(h,r,a,!1,null,"79851ae4",null);e["default"]=p.exports},a1a9:function(t,e,n){},ed33:function(t,e,n){"use strict";n("a1a9")}}]);
//# sourceMappingURL=chunk-18cff9a2.da761228.js.map