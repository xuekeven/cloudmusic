/*! 最终版权归 youngFuns 所有 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1090a465"],{"02da":function(t,e,s){},"10b7":function(t,e,s){},"14ba":function(t,e,s){},"3b5a":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"contain"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{staticClass:"left-list",attrs:{span:5,offset:2}},[s("my-song-list",{staticClass:"songList",attrs:{songListObjAttr:t.songListObj},on:{sendPlaylistId:t.getPlaylistId}})],1),s("el-col",{staticClass:"right-show",attrs:{span:15}},[s("my-song-show",{attrs:{playListInfoAttr:t.playListInfo,playListCommentsAttr:t.playListComments}}),s("album-coment",{attrs:{albumComentsObj:t.playListComments}}),s("div",{staticClass:"box"},[s("el-pagination",{attrs:{"current-page":t.pagenum,"page-sizes":[50,100,200,400],"page-size":t.queryInfo.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.playListComments.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)],1)])},i=[],a=s("1da1"),o=(s("96cf"),s("159b"),s("b0c0"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-card",[s("div",{staticClass:"create"},[s("h4",[s("span",{on:{click:t.showCreateList}},[s("i",{staticClass:"iconfont icon-jiantou ani-jiantou1"}),s("i",{staticClass:"fw"},[t._v("创建的歌单("+t._s(t.songListObjAttr.createSongList.length)+")")])]),s("span",{staticClass:"iconfont icon-tianjia"},[t._v("新建")])]),s("div",[s("ul",{staticClass:"create-list create-list-show"},t._l(t.songListObjAttr.createSongList,(function(e){return s("li",{key:e.id,on:{mouseenter:function(s){return t.showListIcon(e,e.userId)},mouseleave:function(s){return t.hideListIcon(e,e.userId)},click:function(s){return t.getListDet(e)}}},[s("span",{staticClass:"create-img"},[s("img",{attrs:{src:e.coverImgUrl,alt:""}})]),s("div",{staticClass:"create-dec"},[s("p",{staticClass:"name"},[t._v(t._s(e.name))]),s("p",{staticClass:"count"},[t._v(t._s(e.trackCount)+"首")]),s("p",{staticClass:"time",attrs:{id:"b"+e.id}},[t._v(" "+t._s(t._f("dataFormate")(e.createTime))+" ")]),s("p",{staticClass:"opt",attrs:{id:"a"+e.id}},[s("span",{staticClass:"iconfont icon-bianji",on:{click:function(s){return s.stopPropagation(),t.editPlaylistFun(e.id)}}}),s("span",{staticClass:"iconfont icon-shanchu"})])])])})),0)])]),s("div",{staticClass:"collection"},[s("h4",[s("span",{on:{click:t.showCollectionList}},[s("i",{staticClass:"iconfont icon-jiantou ani-jiantou2"}),s("i",{staticClass:"fw"},[t._v("收藏的歌单("+t._s(t.songListObjAttr.collectionSongList.length)+")")])])]),s("div",[s("ul",{staticClass:"collection-list"},t._l(t.songListObjAttr.collectionSongList,(function(e){return s("li",{key:e.id,on:{mouseenter:function(s){return t.showListIcon(e,e.userId)},mouseleave:function(s){return t.hideListIcon(e,e.userId)},click:function(s){return t.getListDet(e)}}},[s("span",{staticClass:"collection-img"},[s("img",{attrs:{src:e.coverImgUrl,alt:""}})]),s("div",{staticClass:"collection-dec"},[s("p",{staticClass:"name"},[t._v(t._s(e.name))]),s("p",{staticClass:"count"},[t._v(" "+t._s(e.trackCount)+"首 by "),s("span",[t._v(t._s(e.creator.nickname))])]),s("p",{staticClass:"opt",attrs:{id:"a"+e.id}},[s("span",{staticClass:"iconfont icon-shanchu"})])])])})),0)])])])],1)}),r=[],c={name:"MySongList",props:{songListObjAttr:{type:Object,default:function(){return{}}}},data:function(){return{isShowCreate:!0,isShowCollection:!0}},methods:{showListIcon:function(t,e){this.$store.state.profile.userId===e?t.name==="".concat(this.$store.state.profile.nickName,"喜欢的音乐")?document.querySelector("#a".concat(t.id)).style.display="none":(document.querySelector("#a".concat(t.id)).style.display="block",document.querySelector("#b".concat(t.id)).style.display="none"):document.querySelector("#a".concat(t.id)).style.display="block"},hideListIcon:function(t,e){this.$store.state.profile.userId===e?(document.querySelector("#a".concat(t.id)).style.display="none",document.querySelector("#b".concat(t.id)).style.display="block"):document.querySelector("#a".concat(t.id)).style.display="none"},showCreateList:function(){this.isShowCreate?(document.querySelector(".create-list-show").style.height="0px",document.querySelector(".ani-jiantou1").style.transform="rotateZ(0deg)",this.isShowCreate=!1):(document.querySelector(".create-list-show").style.height="",document.querySelector(".ani-jiantou1").style.transform="rotateZ(90deg)",this.isShowCreate=!0)},showCollectionList:function(){this.isShowCollection?(document.querySelector(".collection-list").style.height="0px",document.querySelector(".ani-jiantou2").style.transform="rotateZ(0deg)",this.isShowCollection=!1):(document.querySelector(".collection-list").style.height="",document.querySelector(".ani-jiantou2").style.transform="rotateZ(90deg)",this.isShowCollection=!0)},getListDet:function(t){this.$emit("sendPlaylistId",t)}}},l=c,u=(s("b3cb"),s("2877")),d=Object(u["a"])(l,o,r,!1,null,"12c39ae3",null),f=d.exports,p=s("81f7"),m=s("7fe5"),y=s("1bab");function h(t){return Object(y["a"])({url:"/user/playlist",params:{uid:t}})}var g=s("b752"),b=s("0250"),v={name:"MyMusic",data:function(){return{songListObj:{createSongList:[],collectionSongList:[]},playListInfo:{playlist:{creator:{},tracks:[]}},playListComments:{total:null,comments:[],hotComments:[]},queryInfo:{id:"",limit:20,offset:0,before:null},pagenum:1}},created:function(){this.getMyMusicRef()},methods:{getMyMusicRef:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h(t.$store.state.profile.userId);case 2:if(s=e.sent,n=s.data,200===n.code||""===t.$store.state.profile.userId){e.next=6;break}return e.abrupt("return",t.$message.error("请求失败"));case 6:n.playlist.forEach((function(e){e.userId===t.$store.state.profile.userId?t.songListObj.createSongList.push(e):t.songListObj.collectionSongList.push(e)})),t.getPlaylistId(t.songListObj.createSongList[1]);case 8:case"end":return e.stop()}}),e)})))()},getPlaylistId:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var n,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.name!=="".concat(e.$store.state.profile.nickName,"喜欢的音乐")){s.next=4;break}return s.abrupt("return");case 4:return s.next=6,Object(g["f"])(t.id).catch((function(t){return t}));case 6:if(n=s.sent,i=n.data,200===i.code){s.next=10;break}return s.abrupt("return",e.$message.error("获取歌单详情失败"));case 10:e.playListInfo.playlist=i.playlist,e.queryInfo.id=i.playlist.id;case 12:e.getPlayCommentFun();case 13:case"end":return s.stop()}}),s)})))()},getPlayCommentFun:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(b["b"])(t.queryInfo);case 2:if(s=e.sent,n=s.data,200===n.code){e.next=6;break}return e.abrupt("return",t.$message.error("获取评论失败"));case 6:t.playListComments=n,n.total>5e3&&(t.queryInfo.before=n.comments[n.comments.length-1].time);case 8:case"end":return e.stop()}}),e)})))()},handleSizeChange:function(t){this.queryInfo.limit=t,this.getPlayCommentFun()},handleCurrentChange:function(t){this.pagenum=t,this.queryInfo.offset=(t-1)*this.queryInfo.limit,this.getPlayCommentFun()}},components:{MySongList:f,MySongShow:p["a"],AlbumComent:m["a"]}},C=v,_=(s("4104"),Object(u["a"])(C,n,i,!1,null,"1accf1da",null));e["default"]=_.exports},4104:function(t,e,s){"use strict";s("10b7")},5950:function(t,e,s){"use strict";s("ef28")},"81f7":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-card",[s("div",{staticClass:"header-contain clearfix"},[s("div",{staticClass:"avater"},[s("img",{attrs:{src:t.playListInfoAttr.playlist.coverImgUrl,alt:""}})]),s("div",{staticClass:"opt clearfix"},[s("div",{staticClass:"clearfix"},[s("div",{staticClass:"bq_box"},[s("span",{staticClass:"bq"},[t._v("歌单")]),s("i",{staticClass:"sanjiao"})]),s("div",{staticClass:"bq_text"},[t._v(t._s(t.playListInfoAttr.playlist.name))])]),s("p",{staticClass:"user_info"},[s("img",{attrs:{src:t.playListInfoAttr.playlist.creator.avatarUrl,alt:""}}),s("span",[s("i",[t._v(t._s(t.playListInfoAttr.playlist.creator.nickname))]),s("i",[t._v("创建时间："+t._s(t._f("dataFormate")(t.playListInfoAttr.playlist.createTime)))])])]),s("det-btn",{attrs:{totalAttr:t.playListCommentsAttr.total,playListInfoAttr:t.playListInfoAttr}}),s("div",{staticClass:"list-dec"},[s("div",[s("span",[t._v("标签：")]),s("span",t._l(t.playListInfoAttr.playlist.tags,(function(e,n){return s("el-tag",{key:n,attrs:{type:"success"}},[t._v(t._s(e))])})),1)]),s("div",[s("span",[t._v("介绍：")]),s("span",[t._v(t._s(t.playListInfoAttr.playlist.description))])])])],1)]),s("div",{staticClass:"show-list"},[s("h4",[s("span",[t._v("歌曲列表")]),s("span",[t._v(t._s(t.playListInfoAttr.playlist.trackCount)+"首歌")]),s("span",[t._v("播放："),s("i",[t._v(t._s(t.playListInfoAttr.playlist.playCount))]),t._v("次")])])]),s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.playListInfoAttr.playlist.tracks,stripe:""}},[s("el-table-column",{attrs:{type:"index",width:"50"}}),s("el-table-column",{attrs:{type:"index",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("i",{staticClass:"iconfont icon-hm_video_light",on:{click:function(s){return t.saveAudio(e.row.id)}}}),s("i",{directives:[{name:"show",rawName:"v-show",value:e.row.mv,expression:"scope.row.mv"}],staticClass:"iconfont icon-chakanMV",on:{click:function(s){return t.saveMvId(e.row.mv)}}})]}}])}),s("el-table-column",{attrs:{label:"歌曲标题",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"row_po",on:{click:function(s){return t.getSongId(e.row.id)}}},[t._v(t._s(e.row.name))])]}}])}),s("el-table-column",{attrs:{label:"时长"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("i",[t._v(t._s(t._f("secondFormate")(e.row.dt)))])]}}])}),s("el-table-column",{attrs:{label:"歌手"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.ar,(function(n,i){return s("span",{key:n.id,staticClass:"row_po",on:{click:function(e){return t.getSingerId(n.id)}}},[t._v(t._s(n.name)),i!==e.row.ar.length-1?s("i",[t._v("/")]):t._e()])}))}}])}),s("el-table-column",{attrs:{label:"专辑"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"row_po",on:{click:function(s){return t.toggleNewSongInfo(e.row.al.id)}}},[t._v(t._s(e.row.al.name))])]}}])})],1)],1)],1)},i=[],a=s("5530"),o=s("af3d"),r=s("5880"),c={name:"MySongShow",props:{playListInfoAttr:{type:Object,default:function(){return{}}},playListCommentsAttr:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapMutations"])(["albumIdMutations","singerIdMutations","SongIdMutations","musicUrlMutations","onPlayMutations","mvIdMutations"])),Object(r["mapActions"])(["getSongsDetActions"])),{},{toggleNewSongInfo:function(t){this.$router.push("/newSongInfo"),this.albumIdMutations(t)},getSingerId:function(t){this.singerIdMutations(t),this.$router.push("/singer/detail")},getSongId:function(t){this.SongIdMutations(t),this.$router.push("/songs/detail")},saveAudio:function(t){this.musicUrlMutations(t),this.getSongsDetActions(t),this.$bus.$emit("onPlay")},saveMvId:function(t){this.mvIdMutations(t),this.$router.push("/mvdet")}}),components:{DetBtn:o["a"]}},l=c,u=(s("8a5f"),s("2877")),d=Object(u["a"])(l,n,i,!1,null,"217f5317",null);e["a"]=d.exports},"8a5f":function(t,e,s){"use strict";s("02da")},af3d:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("p",{staticClass:"opt_btn"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.playAudio(),t.savePlayListId()}}},[s("i",{staticClass:"iconfont icon-bofang"}),t._v("播放 ")]),s("el-button",{attrs:{type:"primary"}},[s("i",{staticClass:"iconfont icon-yinle"}),t._v("收藏 ")]),s("el-button",{attrs:{type:"primary"}},[s("i",{staticClass:"iconfont icon-fenxiang1"}),t._v(" 分享 ")]),s("el-button",{attrs:{type:"primary"}},[s("i",{staticClass:"iconfont icon-xiazai"}),t._v("下载 ")]),s("el-button",{attrs:{type:"primary"}},[s("i",{staticClass:"iconfont icon-xinxi"}),t._v("评论 "),s("span",[t._v("("+t._s(t.totalAttr?t.totalAttr:"0")+")")])])],1)])},i=[],a=s("5530"),o=(s("d81d"),s("5880")),r={name:"DetBtn",props:{totalAttr:null,songDet:{type:Object,default:function(){return{}}},playListInfoAttr:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(o["mapMutations"])(["musicUrlMutations","musicPlayListId"])),Object(o["mapActions"])(["getSongsDetActions"])),{},{playAudio:function(){void 0!==this.songDet.id&&(this.musicUrlMutations(this.songDet.id),this.getSongsDetActions(this.songDet.id),this.$bus.$emit("onPlay"))},savePlayListId:function(){if(void 0!==this.playListInfoAttr.playlist){var t=this.playListInfoAttr.playlist.tracks.map((function(t){return t.id}));this.musicPlayListId(t),this.getSongsDetActions(t[0]),this.musicUrlMutations(t[0]),this.$bus.$emit("onPlay"),this.$bus.$emit("addMusic")}}})},c=r,l=(s("5950"),s("2877")),u=Object(l["a"])(c,n,i,!1,null,"39f56e8a",null);e["a"]=u.exports},b3cb:function(t,e,s){"use strict";s("14ba")},ef28:function(t,e,s){}}]);
//# sourceMappingURL=chunk-1090a465.08f83125.js.map