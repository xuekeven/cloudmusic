/*! 最终版权归 youngFuns 所有 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e1613a7"],{"02da":function(t,e,n){},"0e05":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{offset:2,span:5}},[n("RankList",{on:{getToplistDet:t.getToplistDet}})],1),n("el-col",{attrs:{span:15}},[n("MySongShow",{attrs:{playListInfoAttr:t.toplist,playListCommentsAttr:t.toplistComments}}),n("AlbumComent",{attrs:{albumComentsObj:t.toplistComments}}),n("div",{staticClass:"box"},[n("el-pagination",{attrs:{"current-page":t.pagenum,"page-sizes":[50,100,200,400],"page-size":t.queryInfo.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.toplistComments.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)],1)},i=[],a=n("1da1"),o=(n("96cf"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-card",[n("div",{staticClass:"cloud"},[n("h4",[t._v("云音乐特色榜")]),n("ul",t._l(t.cloudList,(function(e,s){return n("li",{key:e.id,class:[t.active===s?"activeClass":""],on:{click:function(n){return t.getToplistId(e.id,s)}}},[n("img",{attrs:{src:e.coverImgUrl,alt:""}}),n("div",{staticClass:"cloud-list-name"},[n("p",[t._v(t._s(e.name))]),n("p",[t._v(t._s(e.updateFrequency))])])])})),0)]),n("div",{staticClass:"all"},[n("h4",[t._v("全球媒体榜")]),n("ul",t._l(t.allList,(function(e){return n("li",{key:e.id,on:{click:function(n){return t.getToplistId(e.id,t.index)}}},[n("img",{attrs:{src:e.coverImgUrl,alt:""}}),n("div",{staticClass:"cloud-list-name"},[n("p",[t._v(t._s(e.name))]),n("p",[t._v(t._s(e.updateFrequency))])])])})),0)])])],1)}),r=[],l=(n("fb6a"),n("1bab"));function c(){return Object(l["a"])({url:"/toplist"})}var u={name:"RankList",data:function(){return{cloudList:[],allList:[],active:0}},created:function(){this.getToplistRef()},methods:{getToplistRef:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:if(n=e.sent,s=n.data,200===s.code){e.next=6;break}return e.abrupt("return",t.$message.error("获取榜单失败"));case 6:t.cloudList=s.list.slice(0,4),t.allList=s.list.slice(4),t.getToplistId(s.list[0].id),t.active=0;case 10:case"end":return e.stop()}}),e)})))()},getToplistId:function(t,e){this.active=e,this.$emit("getToplistDet",t)}}},f=u,p=(n("9d2e"),n("2877")),d=Object(p["a"])(f,o,r,!1,null,"28c2b48a",null),m=d.exports,v=n("81f7"),g=n("7fe5"),y=n("b752"),h=n("0250"),b={name:"Rank",data:function(){return{toplist:{playlist:{creator:{},tracks:[]}},toplistComments:{total:null,comments:[],hotComments:[]},queryInfo:{id:"",limit:20,offset:0,before:null},pagenum:1}},methods:{getToplistDet:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(y["f"])(t);case 2:if(s=n.sent,i=s.data,200===i.code){n.next=6;break}return n.abrupt("return",e.$message.error("获取详情失败"));case 6:e.toplist=i,e.queryInfo.id=t,e.getToplistCommentRef();case 9:case"end":return n.stop()}}),n)})))()},getToplistCommentRef:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(h["b"])(t.queryInfo);case 2:if(n=e.sent,s=n.data,200===s.code){e.next=6;break}return e.abrupt("return",t.$message.error("获取评论失败"));case 6:t.toplistComments=s,s.total>5e3&&(t.queryInfo.before=s.comments[s.comments.length-1].time);case 8:case"end":return e.stop()}}),e)})))()},handleSizeChange:function(t){this.queryInfo.limit=t,this.getToplistCommentRef()},handleCurrentChange:function(t){this.pagenum=t,this.queryInfo.offset=(t-1)*this.queryInfo.limit,this.getToplistCommentRef()}},components:{RankList:m,MySongShow:v["a"],AlbumComent:g["a"]}},_=b,I=(n("ae8b"),Object(p["a"])(_,s,i,!1,null,"18e12ad9",null));e["default"]=I.exports},5950:function(t,e,n){"use strict";n("ef28")},"81f7":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-card",[n("div",{staticClass:"header-contain clearfix"},[n("div",{staticClass:"avater"},[n("img",{attrs:{src:t.playListInfoAttr.playlist.coverImgUrl,alt:""}})]),n("div",{staticClass:"opt clearfix"},[n("div",{staticClass:"clearfix"},[n("div",{staticClass:"bq_box"},[n("span",{staticClass:"bq"},[t._v("歌单")]),n("i",{staticClass:"sanjiao"})]),n("div",{staticClass:"bq_text"},[t._v(t._s(t.playListInfoAttr.playlist.name))])]),n("p",{staticClass:"user_info"},[n("img",{attrs:{src:t.playListInfoAttr.playlist.creator.avatarUrl,alt:""}}),n("span",[n("i",[t._v(t._s(t.playListInfoAttr.playlist.creator.nickname))]),n("i",[t._v("创建时间："+t._s(t._f("dataFormate")(t.playListInfoAttr.playlist.createTime)))])])]),n("det-btn",{attrs:{totalAttr:t.playListCommentsAttr.total,playListInfoAttr:t.playListInfoAttr}}),n("div",{staticClass:"list-dec"},[n("div",[n("span",[t._v("标签：")]),n("span",t._l(t.playListInfoAttr.playlist.tags,(function(e,s){return n("el-tag",{key:s,attrs:{type:"success"}},[t._v(t._s(e))])})),1)]),n("div",[n("span",[t._v("介绍：")]),n("span",[t._v(t._s(t.playListInfoAttr.playlist.description))])])])],1)]),n("div",{staticClass:"show-list"},[n("h4",[n("span",[t._v("歌曲列表")]),n("span",[t._v(t._s(t.playListInfoAttr.playlist.trackCount)+"首歌")]),n("span",[t._v("播放："),n("i",[t._v(t._s(t.playListInfoAttr.playlist.playCount))]),t._v("次")])])]),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.playListInfoAttr.playlist.tracks,stripe:""}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),n("el-table-column",{attrs:{type:"index",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"iconfont icon-hm_video_light",on:{click:function(n){return t.saveAudio(e.row.id)}}}),n("i",{directives:[{name:"show",rawName:"v-show",value:e.row.mv,expression:"scope.row.mv"}],staticClass:"iconfont icon-chakanMV",on:{click:function(n){return t.saveMvId(e.row.mv)}}})]}}])}),n("el-table-column",{attrs:{label:"歌曲标题",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"row_po",on:{click:function(n){return t.getSongId(e.row.id)}}},[t._v(t._s(e.row.name))])]}}])}),n("el-table-column",{attrs:{label:"时长"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",[t._v(t._s(t._f("secondFormate")(e.row.dt)))])]}}])}),n("el-table-column",{attrs:{label:"歌手"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.ar,(function(s,i){return n("span",{key:s.id,staticClass:"row_po",on:{click:function(e){return t.getSingerId(s.id)}}},[t._v(t._s(s.name)),i!==e.row.ar.length-1?n("i",[t._v("/")]):t._e()])}))}}])}),n("el-table-column",{attrs:{label:"专辑"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"row_po",on:{click:function(n){return t.toggleNewSongInfo(e.row.al.id)}}},[t._v(t._s(e.row.al.name))])]}}])})],1)],1)],1)},i=[],a=n("5530"),o=n("af3d"),r=n("5880"),l={name:"MySongShow",props:{playListInfoAttr:{type:Object,default:function(){return{}}},playListCommentsAttr:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["mapMutations"])(["albumIdMutations","singerIdMutations","SongIdMutations","musicUrlMutations","onPlayMutations","mvIdMutations"])),Object(r["mapActions"])(["getSongsDetActions"])),{},{toggleNewSongInfo:function(t){this.$router.push("/newSongInfo"),this.albumIdMutations(t)},getSingerId:function(t){this.singerIdMutations(t),this.$router.push("/singer/detail")},getSongId:function(t){this.SongIdMutations(t),this.$router.push("/songs/detail")},saveAudio:function(t){this.musicUrlMutations(t),this.getSongsDetActions(t),this.$bus.$emit("onPlay")},saveMvId:function(t){this.mvIdMutations(t),this.$router.push("/mvdet")}}),components:{DetBtn:o["a"]}},c=l,u=(n("8a5f"),n("2877")),f=Object(u["a"])(c,s,i,!1,null,"217f5317",null);e["a"]=f.exports},"8a5f":function(t,e,n){"use strict";n("02da")},"94ab":function(t,e,n){},"9d2e":function(t,e,n){"use strict";n("94ab")},ad8a:function(t,e,n){},ae8b:function(t,e,n){"use strict";n("ad8a")},af3d:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",{staticClass:"opt_btn"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.playAudio(),t.savePlayListId()}}},[n("i",{staticClass:"iconfont icon-bofang"}),t._v("播放 ")]),n("el-button",{attrs:{type:"primary"}},[n("i",{staticClass:"iconfont icon-yinle"}),t._v("收藏 ")]),n("el-button",{attrs:{type:"primary"}},[n("i",{staticClass:"iconfont icon-fenxiang1"}),t._v(" 分享 ")]),n("el-button",{attrs:{type:"primary"}},[n("i",{staticClass:"iconfont icon-xiazai"}),t._v("下载 ")]),n("el-button",{attrs:{type:"primary"}},[n("i",{staticClass:"iconfont icon-xinxi"}),t._v("评论 "),n("span",[t._v("("+t._s(t.totalAttr?t.totalAttr:"0")+")")])])],1)])},i=[],a=n("5530"),o=(n("d81d"),n("5880")),r={name:"DetBtn",props:{totalAttr:null,songDet:{type:Object,default:function(){return{}}},playListInfoAttr:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(o["mapMutations"])(["musicUrlMutations","musicPlayListId"])),Object(o["mapActions"])(["getSongsDetActions"])),{},{playAudio:function(){void 0!==this.songDet.id&&(this.musicUrlMutations(this.songDet.id),this.getSongsDetActions(this.songDet.id),this.$bus.$emit("onPlay"))},savePlayListId:function(){if(void 0!==this.playListInfoAttr.playlist){var t=this.playListInfoAttr.playlist.tracks.map((function(t){return t.id}));this.musicPlayListId(t),this.getSongsDetActions(t[0]),this.musicUrlMutations(t[0]),this.$bus.$emit("onPlay"),this.$bus.$emit("addMusic")}}})},l=r,c=(n("5950"),n("2877")),u=Object(c["a"])(l,s,i,!1,null,"39f56e8a",null);e["a"]=u.exports},ef28:function(t,e,n){},fb6a:function(t,e,n){"use strict";var s=n("23e7"),i=n("861d"),a=n("e8b5"),o=n("23cb"),r=n("50c4"),l=n("fc6a"),c=n("8418"),u=n("b622"),f=n("1dde"),p=f("slice"),d=u("species"),m=[].slice,v=Math.max;s({target:"Array",proto:!0,forced:!p},{slice:function(t,e){var n,s,u,f=l(this),p=r(f.length),g=o(t,p),y=o(void 0===e?p:e,p);if(a(f)&&(n=f.constructor,"function"!=typeof n||n!==Array&&!a(n.prototype)?i(n)&&(n=n[d],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return m.call(f,g,y);for(s=new(void 0===n?Array:n)(v(y-g,0)),u=0;g<y;g++,u++)g in f&&c(s,u,f[g]);return s.length=u,s}})}}]);
//# sourceMappingURL=chunk-4e1613a7.f724d590.js.map